{% extends "base.html" %}

{% block title %}SESSION LOG - STUDYLOGIX{% endblock %}

{% block content %}
<!-- Nothing OS Session Logging Interface -->
<div style="display: flex; justify-content: center; align-items: center; min-height: 80vh; padding: 20px;">
    <div class="glass-card ambient-card" style="max-width: 600px; width: 100%;">
        <!-- Header -->
        <div style="padding: 32px 32px 24px 32px; text-align: center; border-bottom: 1px solid var(--glass-border);">
            <div style="width: 80px; height: 80px; margin: 0 auto 20px auto; display: flex; align-items: center; justify-content: center; border: 2px solid var(--nothing-green); border-radius: 50%; background: var(--glass-bg);">
                <i class="fas fa-plus-circle" style="font-size: 32px; color: var(--nothing-green);"></i>
            </div>
            <h1 style="font-family: 'DotGothic16', monospace; font-size: 24px; color: var(--nothing-white); margin: 0 0 8px 0;">
                SESSION LOG
            </h1>
            <p style="color: var(--nothing-gray-400); margin: 0; font-size: 14px;">
                RECORD ‚Ä¢ ANALYZE ‚Ä¢ OPTIMIZE YOUR LEARNING DATA
            </p>
        </div>
        
        <!-- Session Form -->
        <div style="padding: 32px;">
            <form method="POST" style="display: flex; flex-direction: column; gap: 24px;">
                <!-- Subject Field -->
                <div class="form-group-nothing">
                    <label style="display: flex; align-items: center; gap: 12px; color: var(--nothing-gray-300); font-family: 'DotGothic16', monospace; font-size: 14px; margin-bottom: 8px;">
                        <i class="fas fa-book" style="color: var(--nothing-cyan);"></i>
                        SUBJECT *
                    </label>
                    <input type="text" class="form-control-nothing" id="subject" name="subject" 
                           placeholder="MATHEMATICS_PHYSICS_CHEMISTRY" required style="font-family: 'JetBrains Mono', monospace;">
                </div>
                
                <!-- Duration Field -->
                <div class="form-group-nothing">
                    <label style="display: flex; align-items: center; gap: 12px; color: var(--nothing-gray-300); font-family: 'DotGothic16', monospace; font-size: 14px; margin-bottom: 8px;">
                        <i class="fas fa-clock" style="color: var(--nothing-orange);"></i>
                        DURATION (MINUTES) *
                    </label>
                    <input type="number" class="form-control-nothing" id="duration" name="duration" 
                           min="1" max="600" placeholder="90" required style="font-family: 'JetBrains Mono', monospace;">
                    <div style="color: var(--nothing-gray-500); font-size: 12px; margin-top: 4px; font-family: 'JetBrains Mono', monospace;">
                        RANGE: 1-600 MINUTES
                    </div>
                </div>
                
                <!-- Mood and Productivity Row -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <!-- Mood Field -->
                    <div class="form-group-nothing">
                        <label style="display: flex; align-items: center; gap: 12px; color: var(--nothing-gray-300); font-family: 'DotGothic16', monospace; font-size: 14px; margin-bottom: 8px;">
                            <i class="fas fa-smile" style="color: var(--nothing-purple);"></i>
                            MOOD *
                        </label>
                        <select class="form-control-nothing" id="mood" name="mood" required style="font-family: 'JetBrains Mono', monospace;">
                            <option value="">SELECT_MOOD</option>
                            <option value="excellent">üòÑ EXCELLENT</option>
                            <option value="good">üòä GOOD</option>
                            <option value="fair">üòê FAIR</option>
                            <option value="poor">üòü POOR</option>
                        </select>
                    </div>
                    
                    <!-- Productivity Field -->
                    <div class="form-group-nothing">
                        <label style="display: flex; align-items: center; gap: 12px; color: var(--nothing-gray-300); font-family: 'DotGothic16', monospace; font-size: 14px; margin-bottom: 8px;">
                            <i class="fas fa-chart-line" style="color: var(--nothing-green);"></i>
                            PRODUCTIVITY *
                        </label>
                        <select class="form-control-nothing" id="productivity" name="productivity" required style="font-family: 'JetBrains Mono', monospace;">
                            <option value="">SELECT_LEVEL</option>
                            <option value="very_high">üöÄ VERY_HIGH</option>
                            <option value="high">‚≠ê HIGH</option>
                            <option value="medium">üìà MEDIUM</option>
                            <option value="low">üìâ LOW</option>
                            <option value="very_low">üò¥ VERY_LOW</option>
                        </select>
                    </div>
                </div>
                
                <!-- Date Field -->
                <div class="form-group-nothing">
                    <label style="display: flex; align-items: center; gap: 12px; color: var(--nothing-gray-300); font-family: 'DotGothic16', monospace; font-size: 14px; margin-bottom: 8px;">
                        <i class="fas fa-calendar" style="color: var(--nothing-blue);"></i>
                        SESSION DATE
                    </label>
                    <input type="date" class="form-control-nothing" id="session_date" name="session_date" style="font-family: 'JetBrains Mono', monospace;">
                    <div style="color: var(--nothing-gray-500); font-size: 12px; margin-top: 4px; font-family: 'JetBrains Mono', monospace;">
                        LEAVE_BLANK_FOR_TODAY
                    </div>
                </div>
                
                <!-- Notes Field -->
                <div class="form-group-nothing">
                    <label style="display: flex; align-items: center; gap: 12px; color: var(--nothing-gray-300); font-family: 'DotGothic16', monospace; font-size: 14px; margin-bottom: 8px;">
                        <i class="fas fa-sticky-note" style="color: var(--nothing-gray-400);"></i>
                        NOTES (OPTIONAL)
                    </label>
                    <textarea class="form-control-nothing" id="notes" name="notes" rows="4" 
                              placeholder="STUDY_TOPICS_OBSERVATIONS_INSIGHTS" style="font-family: 'JetBrains Mono', monospace; resize: vertical;"></textarea>
                </div>
                
                <!-- Action Buttons -->
                <div style="display: flex; gap: 16px; justify-content: flex-end; margin-top: 32px; flex-wrap: wrap;">
                    <a href="{{ url_for('dashboard') }}" class="btn-nothing" style="flex: 1; min-width: 140px;">
                        <i class="fas fa-arrow-left"></i>
                        BACK TO COMMAND
                    </a>
                    <button type="submit" class="btn-nothing btn-nothing-primary" style="flex: 1; min-width: 140px;">
                        <i class="fas fa-save"></i>
                        LOG SESSION
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Background Terminal Animation -->
<div class="terminal-lines" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; opacity: 0.1;">
    <div style="position: absolute; top: 20%; left: 8%; font-family: 'JetBrains Mono', monospace; font-size: 12px; color: var(--nothing-green); animation: terminal-glow 5s ease-in-out infinite;">
        > SESSION_LOGGING_INITIALIZED
    </div>
    <div style="position: absolute; top: 65%; right: 12%; font-family: 'JetBrains Mono', monospace; font-size: 12px; color: var(--nothing-cyan); animation: terminal-glow 5s ease-in-out infinite 2s;">
        > DATA_VALIDATION_ACTIVE
    </div>
    <div style="position: absolute; bottom: 35%; left: 25%; font-family: 'JetBrains Mono', monospace; font-size: 12px; color: var(--nothing-purple); animation: terminal-glow 5s ease-in-out infinite 4s;">
        > AWAITING_INPUT_DATA
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Nothing OS Session Logger System
document.addEventListener('DOMContentLoaded', function() {
    // Set today's date as default
    document.getElementById('session_date').value = new Date().toISOString().split('T')[0];
    
    console.log('SESSION_LOGGER_INITIALIZED');
    
    // Duration field enhancement
    const durationField = document.getElementById('duration');
    const durationDisplay = document.createElement('div');
    durationDisplay.style.cssText = `
        color: var(--nothing-cyan);
        font-family: 'JetBrains Mono', monospace;
        font-size: 12px;
        margin-top: 4px;
        min-height: 16px;
    `;
    durationField.parentNode.appendChild(durationDisplay);
    
    durationField.addEventListener('input', function() {
        const minutes = parseInt(this.value);
        if (minutes && minutes > 0) {
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            const display = hours > 0 ? `${hours}H ${mins}M` : `${mins}M`;
            durationDisplay.textContent = `CONVERTED: ${display}`;
            durationDisplay.style.color = 'var(--nothing-green)';
            
            // Subtle glow effect
            this.style.boxShadow = '0 0 20px rgba(0, 255, 204, 0.3)';
            setTimeout(() => {
                this.style.boxShadow = '';
            }, 300);
        } else {
            durationDisplay.textContent = '';
            this.style.boxShadow = '';
        }
    });
    
    // Form submission enhancement
    const form = document.querySelector('form');
    form.addEventListener('submit', function(e) {
        const submitBtn = form.querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> PROCESSING';
        submitBtn.disabled = true;
        
        // Re-enable after a short delay if form validation fails
        setTimeout(() => {
            if (submitBtn.disabled) {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }, 3000);
    });
    
    // Real-time validation feedback
    const requiredFields = form.querySelectorAll('[required]');
    requiredFields.forEach(field => {
        field.addEventListener('blur', function() {
            if (this.value.trim()) {
                this.style.borderColor = 'var(--nothing-green)';
            } else {
                this.style.borderColor = 'var(--nothing-red)';
            }
        });
        
        field.addEventListener('focus', function() {
            this.style.borderColor = 'var(--nothing-cyan)';
        });
    });
});
</script>
{% endblock %}
